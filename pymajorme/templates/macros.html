{% macro getAttributeName(attribute) %}
    {% if attribute.column_parameters|selectattr("name", "equalto", "name")|list|count > 0 -%}
    {#- uzima se poslednji name atribut, ako nije definisan uzima se naziv atributa za naziv kolone -#}
    name = "{{(attribute.column_parameters|selectattr("name", "equalto", "name")|list|last).value}}"
    {%- else -%}
    name = "{{attribute.name}}"
    {%- endif -%}
{% endmacro -%}

{% macro getAttributeNameForJoin(attribute) %}
    {% if attribute.join_column_parameters|selectattr("name", "equalto", "name")|list|count > 0 -%}
    {#- uzima se poslednji name atribut, ako nije definisan uzima se naziv atributa za naziv kolone -#}
    {{(attribute.join_column_parameters|selectattr("name", "equalto", "name")|list|last).value}}
    {%- elif attribute.name -%}
    {{attribute.name}}
    {%- else -%}
    {{attribute.type.name}}
    {%- endif -%}
{% endmacro -%}

{% macro relationAnnotations(attributeName, oppositeSide, relation_type) %}
    {% if oppositeSide.fk_column_parameters %}(
    {%- for param in oppositeSide.fk_column_parameters %}
    {%- if param.name == "cascade" -%}
    cascade = {
    {%- for cascade in param.values -%}
    {%- if not loop.first %}, {% endif %}{{cascade}}
    {%- endfor %}}
    {%- else %}
    {%- if not loop.first %}, {% endif %}{{param.name}} = {{param.value}}
    {%- endif %}
    {% endfor %})
    {% else %}
    {# novi red ako ne postoje atributi #}

    {% endif %}
    @JoinColumn(name = "{{getAttributeNameForJoin(oppositeSide)}}"
    {%- if oppositeSide.join_column_parameters %}
    {%- for param in oppositeSide.join_column_parameters|rejectattr("name", "equalto", "name") -%}
    , {{param.name}} = {{param.value}}
    {%- endfor %}
    {% endif -%}
    , targetEntity = {{oppositeSide.type.name}}.class
    {%- if not relation_type == '->' -%}
    , mappedBy = "{{ getAttributeNameForJoin(oppositeSide) }}"
    {%- endif -%})
{%- endmacro %}